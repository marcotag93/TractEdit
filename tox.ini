[tox]
envlist = py311
isolated_build = true
skip_missing_interpreters = true

[testenv]
description = Run tests with Python 3.11
deps =
    pytest>=7.0
    pytest-cov>=4.0
    pytest-xvfb>=3.0
commands =
    pytest {posargs:tests/ -v}

# Coverage reporting environment
[testenv:coverage]
basepython = python3.11
description = Generate test coverage report
deps =
    {[testenv]deps}
commands =
    pip install -e .
    pytest tests/ -v --cov=tractedit_pkg --cov-report=html --cov-report=term-missing

# Quick test environment (skips slow tests)
[testenv:quick]
basepython = python3.11
description = Quick test run skipping slow tests
deps =
    {[testenv]deps}
commands =
    pip install -e .
    pytest tests/ -v -m "not slow"

# Numba-disabled environment for debugging
[testenv:no-jit]
basepython = python3.11
description = Run tests without Numba JIT compilation
deps =
    {[testenv]deps}
setenv =
    NUMBA_DISABLE_JIT = 1
commands =
    pip install -e .
    pytest tests/ -v
